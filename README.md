# PhilosophersProblem
Решение [Задачи об обедающих философах](https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%B4%D0%B0%D1%87%D0%B0_%D0%BE%D0%B1_%D0%BE%D0%B1%D0%B5%D0%B4%D0%B0%D1%8E%D1%89%D0%B8%D1%85_%D1%84%D0%B8%D0%BB%D0%BE%D1%81%D0%BE%D1%84%D0%B0%D1%85) на языка С#

## Запуск
`PhilosophersProblem.exe` - запуск программы с 5-ю философами, философы не тратят время на размышления и употребление пищи.

`PhilosophersProblem.exe -p 10 -e` - запуск программы с 10-ю философами и включенным режимом эмуляции активности каждого философа, т.е. упортребление пищи и размышления будут занимать случайное время от 50 ms до 1 sec.

## Вывод на консоль
Программа печатает номер философа и в каком состоянии он находится.

После нажатия на любую клавишу, все потоки останавливаются и выводится статистика по запуску. Статистика позволяет увидеть отсутсвие livelock'a.

## Идея
Каждый философ пытается получить доступ к общему ресурсу - набору вилок. 

Сначала философ пытается взять левую вилку, затем правую. Если обе вилки доступны, то философ их берет, т.е. поднимает флаг у каждой вилки, что она взята, и отпускает общий ресурс. Если хотя бы одна вилка недоступна, философ отпускает общий ресур (`Monitor.Wait`), чтобы другой философ смог взять свою вилку. Т.е. временно освободить объект и тем самым дать возможность выполняться другим потокам. 

Когда какой-то философ, кладет обе вилки (т.е. опускает флаги), перед тем как освободить общий ресурс, он сообщает всем ждущим потокам (`Monitor.PulseAll`), что теперь они могут  снова получить ресурс и проверить вилки на доступность.
